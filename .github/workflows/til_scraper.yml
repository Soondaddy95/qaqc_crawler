name: Daily TIL Crawler

on:
  schedule:
    # í•œêµ­ ì‹œê°„ 00:00 ì‹¤í–‰ (UTC 15:00)
    - cron: '0 15 * * *'
  
  # ìˆ˜ë™ ì‹¤í–‰ ë²„íŠ¼
  workflow_dispatch:

jobs:
  build:
    runs-on: ubuntu-latest

    steps:
      - name: Checkout code
        uses: actions/checkout@v3

      - name: Set up Python
        uses: actions/setup-python@v4
        with:
          python-version: '3.10'

      - name: Setup Chrome
        uses: browser-actions/setup-chrome@latest
        with:
          chrome-version: stable

      - name: Install dependencies
        run: |
          pip install -r requirements.txt

      - name: Create JSON key file
        # êµ¬ê¸€ ì¸ì¦í‚¤ íŒŒì¼ ìƒì„±
        run: |
          echo '${{ secrets.GOOGLE_JSON_KEY }}' > qaqc-pipeline.json

      - name: Run Crawler Script
        # ğŸ‘‡ [ì—¬ê¸°ê°€ í•µì‹¬ì…ë‹ˆë‹¤!] ë¹„ë°€ë²ˆí˜¸ë¥¼ íŒŒì´ì¬ì—ê²Œ ì£¼ì…í•˜ëŠ” ì½”ë“œ
        env:
          BACKOFFICE_URL: ${{ secrets.BACKOFFICE_URL }}
          TIL_SHEET_URL: ${{ secrets.TIL_SHEET_URL }}
        run: |
          python daily_til_bot.py