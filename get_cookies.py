# ============================================================
# [ìŠ¤í…”ìŠ¤ ëª¨ë“œ] êµ¬ê¸€ ë¡œê·¸ì¸ ì¿ í‚¤ ì¶”ì¶œê¸° (undetected_chromedriver ì‚¬ìš©)
# ============================================================

import json
import time
import undetected_chromedriver as uc  # ğŸ‘ˆ ìŠ¤í…”ìŠ¤ ëª¨ë“œ í•µì‹¬ ë¼ì´ë¸ŒëŸ¬ë¦¬


# ë°±ì˜¤í”¼ìŠ¤ ì£¼ì†Œ
BACKOFFICE_URL = "https://h99backoffice.spartaclub.kr/"

def extract_cookies():
    print("ğŸ•µï¸â€â™‚ï¸ [ìŠ¤í…”ìŠ¤ ëª¨ë“œ] ë¸Œë¼ìš°ì € ì¤€ë¹„ ì¤‘... (ì¡°ê¸ˆ ê±¸ë¦´ ìˆ˜ ìˆìŠµë‹ˆë‹¤)")
    
    # 1. ìŠ¤í…”ìŠ¤ ë¸Œë¼ìš°ì € ì‹¤í–‰ (ì˜µì…˜ ìµœì†Œí™”)
    # use_subprocess=TrueëŠ” ë§¥ë¶ í™˜ê²½ì—ì„œ ì•ˆì •ì„±ì„ ë†’ì—¬ì¤ë‹ˆë‹¤.
    driver = uc.Chrome(use_subprocess=True)

    try:
        # 2. ë°±ì˜¤í”¼ìŠ¤ ì´ë™
        print("ğŸ”— ë°±ì˜¤í”¼ìŠ¤ ì ‘ì† ì¤‘...")
        driver.get(BACKOFFICE_URL)
        
        # 3. ë¡œê·¸ì¸ ëŒ€ê¸° ì•ˆë‚´
        print("\n" + "="*60)
        print("ğŸ›‘ [ì¤‘ìš”] ì´ì œ êµ¬ê¸€ ë¡œê·¸ì¸ì´ ë§‰íˆì§€ ì•Šì„ ê²ë‹ˆë‹¤.")
        print("1. ìƒˆë¡œ ëœ¬ ë¸Œë¼ìš°ì €ì—ì„œ 'Google ê³„ì •ìœ¼ë¡œ ë¡œê·¸ì¸'ì„ ì§ì ‘ í•˜ì„¸ìš”.")
        print("2. ë¡œê·¸ì¸ì´ ì™„ë£Œë˜ê³  'ê´€ë¦¬ì í˜ì´ì§€'ê°€ ë³´ì´ë©´...")
        print("ğŸ‘‰ ì—¬ê¸° í„°ë¯¸ë„ë¡œ ëŒì•„ì™€ì„œ [Enter] í‚¤ë¥¼ ì¾…! ëˆ„ë¥´ì„¸ìš”.")
        print("="*60)
        
        input() # í˜•ë‹˜ì´ ì—”í„° ì¹  ë•Œê¹Œì§€ ë¬´í•œ ëŒ€ê¸°
        
        # 4. ì¿ í‚¤ ì¶”ì¶œ
        print("âœ… ë¡œê·¸ì¸ ì •ë³´(ì¿ í‚¤) í›”ì¹˜ëŠ” ì¤‘...")
        cookies = driver.get_cookies()
        
        # 5. JSON ë³€í™˜
        cookies_json = json.dumps(cookies, ensure_ascii=False)
        
        print("\n" + "="*60)
        print("ğŸ‰ ì„±ê³µ! ì•„ë˜ [ëŒ€ê´„í˜¸]ë¶€í„° [ëŒ€ê´„í˜¸]ê¹Œì§€ ì „ì²´ë¥¼ ë³µì‚¬í•˜ì„¸ìš”.")
        print("="*60)
        print(cookies_json) 
        print("="*60)
        
        # ë¸Œë¼ìš°ì € ì¢…ë£Œ
        driver.quit()

    except Exception as e:
        print(f"âŒ ì˜¤ë¥˜ ë°œìƒ: {e}")
        driver.quit()

if __name__ == "__main__":
    extract_cookies()